@startuml
title Standard Face Registration

actor User
participant "Home\nScreen" as Home
participant "Instructions\nScreen" as Prep
participant "Scanning\nScreen" as Scan
participant "Camera" as Camera
participant "Face\nAnalyzer" as Analyzer
participant "Room\nDB" as DB

User -> Home : Open application
Home -> Prep : Start face registration

note left of Prep
Guidelines:
- Uncovered face
- Good lighting
end note

Prep -> Scan : Begin face scan
Scan -> Camera : Start capture

loop While scanning (max 30s or until quality OK)
Camera --> Scan : Frame
Scan -> Analyzer : Detect + quality check
Analyzer --> Scan : OK / Not OK
end

Scan -> Camera : Stop capture

alt Face quality NOT OK
Scan --> User : Show registration failed (Return Home)
else Face quality OK
Scan -> Analyzer : Generate embedding
Analyzer --> Scan : Face vector
Scan -> DB : Save face template
DB --> Scan : Saved
Scan --> User : Show success options (Return Home / Add with Mask)
end

@enduml
